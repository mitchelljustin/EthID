<script src="/bower_components/web3/dist/web3.js"></script>
<div class="row">
    <div class="col-sm-10 col-sm-push-1">
        <h5>Search EthIDs</h5>
        <div id="ethIDSearch" class="form-group">
            <input type="text"
                   class="form-control input-group-lg"
                   placeholder="Ethereum Address e.g. 0xde0b295669a9fd93d5f28d9ec85e40f4cb697bae">
        </div>
        <script>
            let web3 = new Web3();
            let $ethIDSearch = $('#ethIDSearch');
            $ethIDSearch.find('input').on('keypress', function (e) {
                if (e.which === 13) {
                    e.preventDefault();
                    var addr = e.target.value;
                    if (!web3.isAddress(addr)) {
                        $ethIDSearch.addClass('has-danger');
                        $(this).addClass('form-control-danger');
                        $ethIDSearch.find('input').once('change input', function () {
                            $ethIDSearch.removeClass('has-danger');
                            $(this).removeClass('form-control-danger');
                        });
                        return;
                    }
                    window.location.pathname = '/' + addr;
                }
            });
        </script>
    </div>
</div>
<br>
<div class="row">
    <div class="col-sm-10 col-sm-push-1">
        <div class="jumbotron">
            <p>
                <strong>EthID</strong> allows you to link your identity to an Ethereum address and store it on the
                Ethereum blockchain.
            </p>
            <p>
                <strong>EthID</strong> is <a href="https://github.com/mvanderh/EthereumID">open source</a>.
                Please be aware that this software is still in a pre-alpha stage.
            </p>
            {{#if isLoggedIn}}
                <a href="/logout" class="btn btn-secondary">
                    Log out
                </a>
            {{else}}
                <a href="/login" class="btn btn-primary">
                    Login with Coinbase
                </a>
            {{/if}}
        </div>
    </div>
</div>